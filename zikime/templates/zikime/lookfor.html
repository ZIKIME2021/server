{% extends 'zikime/base.html' %}

{% block content %}
<!-- services와 clusterer, drawing 라이브러리 불러오기 -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=&libraries=services,clusterer,drawing"></script>

<div class="container">
    <p>피보호자찾기 페이지</p>
    <div id="map" style="width:45vw;height:80vh;"></div>
	<script>

		var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
			mapOption = { 
				center: new kakao.maps.LatLng(37.610996866237016, 126.99723525390235), // 지도의 중심좌표
				level: 7 // 지도의 확대 레벨
			};

		var map = new kakao.maps.Map(mapContainer, mapOption); 

		var devicePositions = [
			[37.610996866237016, 126.99723525390235, '국민대', 'N'],
			[37.56837376710308, 126.97638465205124, '폴바셋', 'E'],
		];

		
		for(var i=0; i<devicePositions.length; i++) {
			var infowindow = new kakao.maps.InfoWindow();
			var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png"; 

			var data = devicePositions[i];
			
			if( data[3] == 'E')
			{
				var imageSize = new kakao.maps.Size(24, 35); 
				var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
				var marker = new kakao.maps.Marker({
					position: new kakao.maps.LatLng(data[0], data[1]),
					map: map,
					image : markerImage,
				});
			}else{
				var marker = new kakao.maps.Marker({
					position: new kakao.maps.LatLng(data[0], data[1]),
					map: map,
					image : markerImage,
				});
			}

			marker.title = data[2];

			infowindow.setContent('<div>'+ marker.title+'</div>');
			infowindow.setPosition(marker.getPosition());
			infowindow.open(map, marker);
		}

	</script>	
{% endblock %}